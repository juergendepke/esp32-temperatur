<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MultiSensor BLE Dashboard</title>
    <meta name="theme-color" content="#007aff">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>📊</text></svg>">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="topbar">
        <h1>📊 SensorDashboard</h1>
        <div class="topbar-actions">
            <button id="scanBtn" class="btn primary">🔍 Scan Starten</button>
            <button id="disconnectAllBtn" class="btn secondary">❌ Alle trennen</button>
        </div>
    </header>

    <main>
        <!-- Geräteliste -->
        <section class="card">
            <div class="card-header">
                <h3>📱 Verfügbare Geräte</h3>
                <span id="deviceCount" class="badge">0 verbunden</span>
            </div>
            <div id="availableDevices" class="devices-list">
                <div class="no-devices">
                    <p>🔍 Keine Geräte gefunden</p>
                    <p class="hint">Klicke auf "Scan Starten" um nach Sensoren zu suchen</p>
                </div>
            </div>
        </section>

        <!-- Sensor Dashboard -->
        <section class="card">
            <div class="card-header">
                <h3>📊 Sensor Dashboard</h3>
                <span id="sensorCount" class="badge">0 Sensoren</span>
            </div>
            <div id="sensorDashboard" class="dashboard-grid">
                <div class="no-sensors">
                    <p>🌡️⚡ Keine Sensoren verbunden</p>
                    <p class="hint">Verbinde Geräte um deren Daten hier zu sehen</p>
                </div>
            </div>
        </section>

        <!-- Einstellungen -->
        <section class="card">
            <div class="card-header">
                <h3>⚙️ Globale Einstellungen</h3>
            </div>
            
            <div class="setting-group">
                <label class="setting-label">
                    Update-Intervall: <span id="intervalValue" style="color: var(--accent); font-weight: 700;">2</span>s
                </label>
                <input type="range" id="intervalSlider" min="1" max="60" value="2" class="slider">
                <button id="applyInterval" class="btn secondary" style="width: 100%; margin-top: 8px;">
                    💾 Intervall übernehmen
                </button>
            </div>

            <div class="setting-group">
                <label class="setting-label">
                    Scan-Dauer: <span id="scanDurationValue" style="color: var(--accent); font-weight: 700;">10</span>s
                </label>
                <input type="range" id="scanDurationSlider" min="5" max="30" value="10" class="slider">
            </div>
        </section>

        <!-- Status Information -->
        <section class="card">
            <div class="row">
                <strong>🔗 BLE Status</strong>
                <span id="bleStatus" class="status-available">Verfügbar</span>
            </div>
            <div class="row">
                <strong>📱 Verbundene Geräte</strong>
                <span id="connectedDevicesCount">0</span>
            </div>
            <div class="row">
                <strong>🕒 Letzter Scan</strong>
                <span id="lastScanTime">—</span>
            </div>
        </section>
    </main>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p id="loadingText">Verbinde mit Gerät...</p>
    </div>

    <!-- Device Selection Modal -->
    <div id="deviceModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>🔍 Gerät auswählen</h3>
                <button id="closeModal" class="btn-close">×</button>
            </div>
            <div id="deviceList" class="modal-body">
                <!-- Wird dynamisch gefüllt -->
            </div>
        </div>
    </div>

    <script src="deviceManager.js"></script>
    <script src="app.js"></script>
</body>
</html>
